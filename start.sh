#!/bin/bash

# Проверка наличия файла .env
if [ ! -f .env ]; then
    echo "Ошибка: Файл .env не найден. Создайте его на основе .env.example"
    exit 1
fi

# Проверка наличия файла документации
if [ ! -f documentation.md ]; then
    echo "Предупреждение: Файл documentation.md не найден. Ассистент не сможет использовать информацию о платформе."
    echo "Создайте файл документации или измените путь в .env"
fi

echo "Запуск микросервиса в Docker..."
docker-compose up -d --build

# Проверка успешного запуска
if [ $? -eq 0 ]; then
    echo "Микросервис успешно запущен и доступен по адресу http://localhost:8000"
    echo "Документация API доступна по адресу http://localhost:8000/docs"
else
    echo "Ошибка при запуске микросервиса. Проверьте логи для получения дополнительной информации."
    exit 1
fi

# Вывод логов для проверки
echo "Вывод логов микросервиса:"
docker-compose logs --tail=30 app 